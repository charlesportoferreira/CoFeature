from. lindholm@ucs.ubc.ca (george lindholm). subject. re. xv . has escaped!. organization. university computing services, ubc, canada. lines. . distribution. world. nntp posting host. swiss.ucs.ubc.ca. . in article , lindholm@ucs.ubc.ca (george lindholm) writes.. > in article bradley@grip.cis.upenn.edu (john bradley) writes.. > >no, not another false alarm, not a "it'll certainly be done by *next* week". > >message... no, this is the real thing. i repeat, this is *not* a drill!. > >. > >batten down the hatches, hide the women, and lock up the cows, xv . has. > >finally escaped. i was cleaning its cage this morning when it overpowered. > >me, broke down the office door, and fled the lab. it was last seen heading. > >in the general direction of export.lcs.mit.edu at nearly k per second.... > >. > >if found, it answers to the name of 'contrib/xv ..tar.z'.. > >. > >have a blast. i'm off to the vacation capital of the u.s.. waco, texas.. > . > and here is the first patch . ) the following fixes some problems with the. > imakefile files and makes it possible to compile xv . under solaris without . > having to use the ucb stuff.. . oops, i didn't get the signal processing right (thats what i get from doing. the work on an ascii terminal). here is the fixed patch.. . *** . // .. imakefile // .. ***************. *** , ****. objs= xcmap.o. . programs= xv bggen vdcomp xcmap. ! . . #if defined(havejpeg) . defined(havetiff). # ifdef havejpeg. , . objs= xcmap.o. . programs= xv bggen vdcomp xcmap. ! all.. ! @echo "". ! @echo " did you remember to 'make depend' first?". ! @echo "". . #if defined(havejpeg) . defined(havetiff). # ifdef havejpeg. ***************. *** , ****. subdirs = tiff. # endif. # define passcdebugflags. makesubdirs($(subdirs)). dependsubdirs($(dubdirs)). #endif. . . all.. @echo "". @echo " did you remember to 'make depend' first?". @echo "". . all.. @echo " building xv ...". @echo "". . , . subdirs = tiff. # endif. # define passcdebugflags. + # define ihavesubdirs. makesubdirs($(subdirs)). #endif. . . all.. @echo " building xv ...". @echo "". . ***************. *** , ****. . . srcs = $(srcs) $(srcs) $(srcs) $(srcs). dependtarget(). . alltarget($(programs)). . normalprogramtarget(xv,$(objs),$(deplibs),$(local libraries),). normalprogramtarget(bggen,$(objs),$(deplibs),$(local libraries),). , . . . srcs = $(srcs) $(srcs) $(srcs) $(srcs). . + . alltarget($(programs)). + dependtarget(). + #ifdef ihavesubdirs. + dependsubdirs($(subdirs)). + #endif. . normalprogramtarget(xv,$(objs),$(deplibs),$(local libraries),). normalprogramtarget(bggen,$(objs),$(deplibs),$(local libraries),). *** . // .. xcmap.c // .. ***************. *** , ****. , . . /* include files */. #include . + #if defined(sun) && defined(sysv). + #include . + #else. #include . + #endif. #include . . #include . *** . // .. xv.h // .. ***************. *** , ****. , . . . /* signal macros */. + #if defined(sun) && defined(sysv). + #define hold sig sighold(sigalrm). + #define release sig sigrelse(sigalrm). + #define pause sig sigpause(sigalrm). + #else. #define hold sig sigblock(sigmask(sigalrm)). #define release sig sigblock(). #define pause sig sigpause(). + #endif. . . /* default for most folks */. ***************. *** , ****. , . #define random rand. #define srandom srand. #endif. + #if defined(sun) && defined(sysv). + #define random() rand(). + #define srandom(x) srand(x). + #endif. . . . *** . // .. tiff/imakefile // .. ***************. *** , ****. , . . tif compress.o. imakefile. . + #if hasgcc. gstates.h. mkgstates.c t.h. ${rm} gstates.h. + ${cc} traditional o mkgstates ${cflags} mkgstates.c. + ./mkgstates > gstates.h . rm gstates.h. + #else. + gstates.h. mkgstates.c t.h. + ${rm} gstates.h. ${cc} o mkgstates ${cflags} mkgstates.c. ./mkgstates > gstates.h . rm gstates.h. + #endif. . depend. gstates.h. . + clean.. + ${rm} mkgstates gstates.h. + . dependtarget().