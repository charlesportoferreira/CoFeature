from. yuki@is.s.u tokyo.ac.jp (ito takayuki). subject. re. what does the .bmp format mean?. organization. department of infomation science, faculty of science, university. of tokyo, japan. lines. . in reply to. robertsa@unix.tcd.ie's message of tue, apr . . gmt. nntp posting host. tje.is.s.u tokyo.ac.jp. . in article . robertsa@unix.tcd.ie (andrew l. roberts) writes.. . >what exactly does the windows bitmap format look like? i mean, how is. >the data stored. width, height, no. of colours, bitmap data? i couldn't. >find anything in ths user manual, is there any other reference material. >which would give me this information?. . from. thomas@sunshine.kodak.com (thomas kinsman). newsgroups. comp.os.ms windows.programmer.misc,alt.binaries.pictures.utilities. subject. dib/bmp creation guide, as requested.. keywords. dib bmp bitmaps file formats. message id. . date. dec . gmt. sender. news@kodak.kodak.com. organization. precambiran electronics, rochester, ny. lines. . xref. cradle.titech comp.os.ms windows.programmer.misc.. . . . . . . . . guide to creation of dib images. . . thomas b. kinsman. . precambrian electronics. falstaff rd.. rochester, ny . thomask@kodak.com. copyright march , . . . . abstract. . the format of images created for use by ms windows ./.. applications is documented in the ms windows programmer's. reference guide. this guide is intended as a clearify some. wording of the specifications, and to put forth a. recommendation among the various alternatives.. . please send updates/corrections/suggestions and revisions to. me. please thank me for writing this on my own time by. keeping my name with the document. thank you for your. respect.. . this document copyright, , by thomas b. kinsman.. if desired, a postscript version of this document is. available.. . this information is free. you get more than what you pay for.. don't sue me if i'm wrong.. . . overview. . the dib image file format is intended to be a "device independent bitmap". file format. (what microsoft means by "device independent" is unclear to. me.) four pixel resolutions are supported. bit, bit, bit, and bit. pixels.. . these images were intended for use on dos (ibm, or little endian) systems.. if you are creating them on another architecture you will have to byte . swap all short and long integer values.. . by convention, dib images end in the extension ".bmp". this is because. . . . march , . . . . . . . . . they are a super set of earlier "bitmap image files". consequently you. will sometimes hear dib files referred to as "bmp" files.. . since dib images files are a super set, there are three "flavors" of dib. images.. o dos dib images. these are the recommended convention, and the. form which i will describe how to create. they are intended for. applications running under ms windows /. in a dos environment.. o os/ dib images. my understanding is that these are the flavor. of dib images that were used by the presentation manager.. o old style bitmap images.. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . march , . . . . . . . . . differences between flavors. . the dos dib images consist of.. . a "bitmapfileheader" file header which identifies the file as a. dib file. this header also gives the total size of the image. file, and the offset to the image data.. . a "bitmapinfoheader" image header which specifies the image. attributes.. . an optional palette of colors used by the image. if it exists,. this may contain , , or entries. each entry is a windows. rgbquad structure.. . the image data itself.. . . the os/ dib images consist of.. . the same "bitmapfileheader" file header which identifies the file. as a dib file. this header also gives the total size of the. image file, and the offset to the image data.. . a "bitmapcoreheader" image header which specifies the image. attributes.. . an optional palette of colors used by the image. again, if this. exists it may contain , , or entries. each entry is a. windows rgbtriple structure.. . the image data itself.. . . the old style image bitmap consists of.. . either a bitmapinfoheader or a bitmapcoreheader. which header. type is determined by the first long integer (dword) value.. . an optional color palette. this palette may be composed of. either windows rgbquad structures (if the header was a. bitmapinfoheader) or windows rgbtriple structures (if the header. was a bitmapcoreheader).. . the image data itself.. . . creating dib image files.. . creating a dos dib image file consists of several straight forward steps.. the headers need to be created and then written to the file. these header. structures are defined in the ms windows/. "windows.h" include file.. palette information needs to be stored for images that are not bit. images. the five general steps are.. . filling in the bitmapfileheader and the bitmapinfoheader. structures the basic image information.. . if the image is a bit, bit, or an bit image, creating the. color palette of rgbquads.. . calculating the total file size and putting this information in. . . . march , . . . . . . . . . the "bfsize" field of the bitmapfileheader.. . calculating the offset to the image data from the start of the. file, and putting this in the "bfoffbits" field of the. bitmapfileheader.. . writing to the file the bitmapfileheader, the bitmapinfoheader,. the color palette, and the image data (in that order).. . the following sections describe structures in terms of microsoft c type . defined keywords. the following table describes these keywords for those. not familiar with microsoft c.. . . . .. . type defined keywords in microsoft c... . .. . typedef . meaning .. . . .. . byte . unsigned character .. . word . two byte unsigned integer .. . dword . four byte unsigned integer.. . . .. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . march , . . . . . . . . . the bitmapfileheader. . this structure is defined in "windows.h" as.. typedef struct tagbitmapfileheader {. word bftype;. dword bfsize;. word bfreserved;. word bfreserved;. dword bfoffbits;. } bitmapfileheader;. . the "bftype" field is the two ascii characters 'b' and 'm'. this serves. to identify the file as a dib image file. on an intel byte ordered. machine (ibm or a compatible), this constant can be formed in c as the. quantity ('m' . senior, department of infomation science,. faculty of science, university of tokyo, japan..